/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";const e=e=>{const t="Загрузка из сервера . . .",o=document.getElementById(e),n=document.createElement("div");n.textContent=t,n.style.cssText="font-size:1.8rem;color:white;padding:5px 0",o.addEventListener("submit",(e=>{e.preventDefault(),o.appendChild(n),n.textContent=t;const s=new FormData(o);let i={};s.forEach(((e,t)=>{i[t]=e})),(e=>fetch("server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))(i).then((e=>{if(200!==e.status)throw new Error("Response status code is not a 200");n.textContent="Спасибо! Данные получены! Мы скоро с Вами свяжемся!"})).catch((e=>{n.textContent="Что-то пошло не так . . ."})),o.querySelectorAll("input").forEach((e=>{e.value=""})),setTimeout((()=>{n.remove()}),7500)}))};(e=>{const t=document.querySelector("#timer-hours"),o=document.querySelector("#timer-minutes"),n=document.querySelector("#timer-seconds"),s=e=>e>=0&&e<10?"0"+e:e,i=()=>{const i=(()=>{const t=(new Date(e).getTime()-(new Date).getTime())/1e3,o=Math.floor(t%60),n=Math.floor(t/60%60);return{timeRemaining:t,hours:Math.floor(t/60/60),minutes:n,seconds:o}})();i.timeRemaining>0?(t.textContent=s(i.hours),o.textContent=s(i.minutes),n.textContent=s(i.seconds)):(t.textContent="00",o.textContent="00",n.textContent="00")};i(),setInterval(i,1e3)})("9 13 2021"),(e=>{const t=document.querySelector(".menu"),o=document.querySelector("menu"),n=e=>{o.style.transform&&"translateX(-100%)"!==o.style.transform?o.style.transform="translateX(-100%)":window.innerWidth>768?(()=>{let e=0,t=0,n=setInterval((()=>{e++,t=(e=>.07*e**2-99)(e),o.style.transform=`translateX(${t}%)`,(t>100||e>200)&&(o.style.transform="translate(100%)",clearInterval(n))}),10)})():o.style.transform="translateX(100%)"};o.addEventListener("click",(e=>{const t=e.target;if(t.matches(".close-btn"))n();else{if(!t.matches("a"))return;n()}})),t.addEventListener("click",n)})(),(()=>{const e=document.querySelector(".popup"),t=document.querySelector(".popup-content"),o=document.querySelectorAll(".popup-btn"),n=document.querySelector(".popup-close"),s=e=>{"Escape"!==e.key&&"Escape"!==e.code||i()},i=t=>{let o=e.style.opacity;if(window.innerWidth>768){let t=0,n=setInterval((()=>{o>0||t>100?(e.style.opacity=o,o=parseInt(10*(o-.1))/10):(e.style.display="none",e.style.opacity=1,clearInterval(n))}),30)}else e.style.display="none",e.style.opacity=1;document.removeEventListener("keydown",s)},r=o=>{t.style.top="-382px",e.style.display="block",t.style.display="block";let n=Math.ceil(.1*window.innerHeight),i=0;if(e.style.opacity=i,window.innerWidth>768){let o=0,s=setInterval((()=>{o++,e.style.opacity=i,i=i<1?parseInt(100*(i+.03))/100:1;let r=9*o-382;t.style.top=`${r}px`,(r>n||o>400)&&(e.style.opacity=1,clearInterval(s))}),6)}else e.style.display="block",e.style.opacity=1,t.style.top=`${n}px`;document.addEventListener("keydown",s)};o.forEach((e=>{e.addEventListener("click",r)})),e.addEventListener("click",(t=>{const o=t.target;if(o===n)i(t);else{if(o!==e)return;i(t)}})),t.style.left=50-15500/window.innerWidth+"%"})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab"),n=e=>{t.forEach(((t,n)=>{n===e?(t.classList.add("active"),o[n].classList.remove("d-none")):(t.classList.remove("active"),o[n].classList.add("d-none"))}))};n(0),e.addEventListener("click",(e=>{let o=e.target.closest(".service-header-tab");t.forEach(((e,t)=>{e===o&&n(t)}))}))})(),(()=>{(()=>{const e=document.querySelector(".portfolio-dots");document.querySelectorAll(".portfolio-item").forEach(((t,o)=>{const n=document.createElement("li");n.classList.add("dot"),0===o&&n.classList.add("dot-active"),e.append(n)}))})();const e=document.querySelectorAll(".portfolio-item"),t=document.querySelectorAll(".dot"),o=document.querySelector(".portfolio-content");let n,s=0;const i=(e,t,o)=>{e[t].classList.remove(o)},r=(e,t,o)=>{e[t].classList.add(o)},l=()=>{i(e,s,"portfolio-item-active"),i(t,s,"dot-active"),s++,s>=e.length&&(s=0),r(e,s,"portfolio-item-active"),r(t,s,"dot-active")},a=(e=3e3)=>{n=setInterval(l,e)};o.addEventListener("click",(o=>{o.preventDefault();const n=o.target;n.matches(".portfolio-btn, .dot")&&(i(e,s,"portfolio-item-active"),i(t,s,"dot-active"),n.matches("#arrow-right")?s++:n.matches("#arrow-left")?s--:n.matches(".dot")&&t.forEach(((e,t)=>{e===n&&(s=t)})),s>=e.length&&(s=0),s<0&&(s=e.length-1),r(e,s,"portfolio-item-active"),r(t,s,"dot-active"))})),o.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(n)})),o.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&a(2e3)})),a(2e3)})(),document.querySelector(".command").querySelectorAll(".command__photo").forEach((e=>{let t;e.addEventListener("mouseenter",(o=>{o.target.matches(".command__photo")&&(t=e.src,e.src=e.dataset.img)})),e.addEventListener("mouseleave",(o=>{o.target.matches(".command__photo")&&t&&(e.src=t)}))})),(()=>{const e=document.querySelectorAll(".calc-item"),t=document.querySelectorAll("input");e.forEach((e=>{e.classList.contains("calc-type")||e.addEventListener("input",(e=>{let t=e.target;e.target.value=t.value.replace(/[^\d]/g,"")}))})),t.forEach((e=>{e.addEventListener("input",(t=>{const o=t.target;let n=o.value;if("user_name"===e.name)o.value=o.value.replace(/[^а-яё\s]/gi,"");else if("user_message"===e.name)o.value=o.value.replace(/[^а-яё0-9\s\,\.\!\?\:\;\-]/gi,"");else if("user_email"===e.name){const e=/([^a-z@0-9\_\-\.\!\~\*\'])|((?<=^)@+)|((?<=@.*)@+)|((?<=[@\.])[@\.]+)/gi;o.value=n.replace(e,"")}else if("user_phone"===e.name){const e=/([^\d\+])|((?<=.{12,}).)|((?<!^)\++)/gi;o.value=n.replace(e,"")}})),e.addEventListener("blur",(e=>{(e=>{let t=e.value;if("user_message"===e.name)e.value=t.replace(/((^[\s\-]+))|((?<=\s)\s+)|((?<=\-)\-+)|([\s\-]+$)/g,"");else if("user_name"===e.name){if(t.trim()){let e=t.match(/[а-яё]+/gi);e=e.map((e=>e.substring(0,1).toUpperCase()+e.substring(1).toLowerCase())),t=e.join(" ")}else t="";e.value=t}else"user_email"===e.name?e.value=t.replace(/(?<=@)@+/g,""):"user_phone"===e.name&&(e.value=t.replace(/((?<=\()\({1,})|((?<=\))\){1,})|((?<=\-)\-{1,})|((?<=\+)\+{1,})/g,""))})(e.target)}))}))})(),((e=100)=>{const t=document.querySelector(".calc-block"),o=t.querySelector(".calc-type"),n=t.querySelector(".calc-square"),s=t.querySelector(".calc-count"),i=t.querySelector(".calc-day"),r=document.getElementById("total");t.addEventListener("change",(t=>{let l=t.target;l!==o&&l!==n&&l!==s&&l!==i||(()=>{let t=o.options[o.selectedIndex].value,l=+n.value,a=1,c=1,d=0;s.value&&s.value>1?a+=(+s.value-1)/10:a=1,i.value&&i.value<5?c*=2:i.value<10&&(c*=1.5),t&&l&&(d=parseInt(e*t*l*a*c*100)/100),r.textContent=d})()}))})(100),e("form1"),e("form2"),e("form3"),new class{constructor({main:e,wrap:t,next:o,prev:n,position:s=0,slidesToShow:i=3,infinity:r=!0}){this.main=document.querySelector(e),this.wrap=document.querySelector(t),this.next=document.querySelector(o),this.prev=document.querySelector(n),this.slides=document.querySelector(t).children,this.slidesToShow=i,this.options={position:s,infinity:r,widthSlide:Math.floor(100/this.slidesToShow)}}init(){this.addGloClass(),this.addStyle(),this.prev&&this.next||this.addArrow(),this.controlSlider()}addGloClass(){this.main.classList.add("glo-slider"),this.wrap.classList.add("glo-slider__wrap");for(const e of this.slides)e.classList.add("glo-slider__item")}addStyle(){const e=document.createElement("style");e.id="sliderCarousel-style",e.textContent=`\n.glo-slider {\n    overflow: hidden !important;\n}\n.glo-slider__wrap {\n    display: flex !important;\n    justify-content: space-between !important;\n    align-items: center !important;\n    transition: transform 0.5s !important;\n    will-change: transition !important;\n}\n.glo-slider__item {\n    flex: 0 0 ${this.options.widthSlide}% !important;\n    margin: auto 0 !important;\n}\n.glo-slider__prev,\n.glo-slider__next {\n    margin: 0 12px;\n    border: 12px solid transparent;\n    background: transparent;\n}\n.glo-slider__next {\n    border-left-color: #19b5fe;\n}\n.glo-slider__prev {\n    border-right-color: #19b5fe;\n}\n\n.glo-slider__next:hover,\n.glo-slider__prev:hover,\n.glo-slider__next:focus,\n.glo-slider__prev:focus {\n    background: transparent;\n    outline: transparent;\n}\n`,document.head.appendChild(e)}controlSlider(){this.prev.addEventListener("click",this.prevSlider.bind(this)),this.next.addEventListener("click",this.nextSlider.bind(this))}prevSlider(){(this.options.infinity||this.options.position>0)&&(--this.options.position,this.options.position<0&&(this.options.position=this.slides.length-this.slidesToShow,console.warn("вернулись в конец")),this.wrap.style.transform=`translateX(-${this.options.position*this.options.widthSlide}%)`)}nextSlider(){(this.options.infinity||this.options.position<this.slides.length-this.slidesToShow)&&(++this.options.position,this.options.position>this.slides.length-this.slidesToShow&&(this.options.position=0,console.warn("вернулись")),this.wrap.style.transform=`translateX(-${this.options.position*this.options.widthSlide}%)`)}addArrow(){this.prev=document.createElement("button"),this.next=document.createElement("button"),this.prev.className="glo-slider__prev",this.next.className="glo-slider__next"}}({main:".companies-wrapper",wrap:".companies-hor",next:"#test-right",prev:"#test-left",slidesToShow:4}).init()})();